<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Clicker+Script|Indie+Flower" rel="stylesheet">
    <script src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD20hEhOFvacycdb9UGlDrKb4Tu1lAKdZc&callback=initMap"></script>
    <script src="myJS.js"></script>
    <title>Dashboard</title>
</head>
<body onload="getLocation(); sendLocation(); getWeather()">
    <header>
        <h1 id="header"><span id="dateTime"></span></h1>
    </header>

    <ul>
        <li><a href="accountSettings.html">Account Settings</a></li>
    </ul>

    <div class="row">

        <div class="col-md-4" id="twitterBox">
            <a id="twitter" class="twitter-timeline" href="" data-height="35em" data-chrome="nofooter, noheader"></a>
        </div>

        <div class="col-md-4" id="locationBox">
            <p id="location">Location</p>
        </div>

        <div class="col-md-4" id="testBox">
            
        </div>

        <div class="col-md-4">
            <div id="mapBox"></div>
            <script>
                function initMap() {
                    var userLocation = localStorage.getItem("userLocation");

                    var latLong = userLocation.split(",");
                    
                    var map = new google.maps.Map(document.getElementById('mapBox'), {
                        zoom: 13,
                        center: {lat: Number(latLong[0]), lng: Number(latLong[1])}
                    });

                    var trafficLayer = new google.maps.TrafficLayer();
                    trafficLayer.setMap(map);
                }
            </script>
        </div>
    </div>

    <script>
        if(localStorage.getItem("twitterSettings") === null){
            localStorage.setItem("twitterSettings", "twitterDev");
            document.getElementById("twitter").href = "https://twitter.com/" + localStorage.getItem("twitterSettings");
        } else {
            document.getElementById("twitter").href = "https://twitter.com/" + localStorage.getItem("twitterSettings");
        }

        document.getElementById("location").innerHTML = localStorage.getItem("weather");
    </script>
</body>
</html>